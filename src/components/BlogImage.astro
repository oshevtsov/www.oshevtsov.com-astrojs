---
import sizeOf from "image-size";

export interface Props {
  src: string;
  alt: string;
  title?: string;
}

const { src, alt, title } = Astro.props;
const { width, height } = sizeOf(`public${src}`);
---

<figure>
  <img
    src={src}
    alt={alt}
    width={width}
    height={height}
    loading="lazy"
    decoding="async"
  />
  {title && <figcaption set:html={title} />}
</figure>
