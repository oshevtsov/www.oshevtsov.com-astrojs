---
import BlogListLayout from "../layouts/BlogListLayout.astro";
import PostCard from "../components/PostCard.astro";
import { compareDesc } from "date-fns";

const posts = await Astro.glob("../content/*.mdx");
---

<BlogListLayout subtitle="All posts" relativePath="/blog">
  {
    posts
      .sort((left, right) => {
        const leftUpdated = Date.parse(left.frontmatter.updated);
        const rightUpdated = Date.parse(right.frontmatter.updated);
        return compareDesc(leftUpdated, rightUpdated);
      })
      .map(({ frontmatter }) => (
        <PostCard
          title={frontmatter.title}
          abstract={frontmatter.abstract}
          published={frontmatter.published}
          updated={frontmatter.updated}
          url={`/blog/${frontmatter.slug}`}
        />
      ))
  }
</BlogListLayout>
